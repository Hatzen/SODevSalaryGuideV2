version: '3'
services:
  postgres-database:
    build:
      context: ./database
    environment:
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    ports:
      - "${POSTGRES_PORT}:5432"
    volumes:
      - ./data/database:/var/lib/postgresql/data

  # https://www.section.io/engineering-education/dockerize-a-rabbitmq-instance/
  rabbitmq3:
    container_name: "rabbitmq"
    image: rabbitmq:3.8-management-alpine
    environment:
      RABBITMQ_DEFAULT_USER: ${RABBITMQ_DEFAULT_USER}
      RABBITMQ_DEFAULT_PASS: ${RABBITMQ_DEFAULT_PASS}
    ports:
      # AMQP protocol port
      - "${RABBIT_MQ_PORT}:5672"
      # HTTP management UI
      - "${RABBIT_MQ_ADMIN_UI_PORT}:15672"

# TODO: Add spring http server and batch